<div class="box">
  <h2>Simple Facebook Graph Search</h2>
  <div class="post-type">
    <input id="all-stories" name="post-type" type="radio" value="" checked>
    <label class="first" for="all-stories">All</label>

    <input id="electronics" name="post-type" type="radio" value="electronics">
    <label for="electronics">Electronics</label>

    <input id="video" name="post-type" type="radio" value="video">
    <label for="video">Video</label>

    <input id="share" name="post-type" type="radio" value="share">
    <label for="share">Share</label>

    <input id="note" name="post-type" type="radio" value="note">
    <label for="note">Note</label>

    <input id="offer" name="post-type" type="radio" value="offer">
    <label class="last" for="offer">Offer</label>
  </div>

  <div class="field ">
    <span class="label">Search Keyword</span>
    <input type="text" class="keyword" placeholder="Keyword or website.com" value="">
  </div>

  <div class="field time">
    <span class="label">Time & Date</span>
    <select name="time">
      <option value="">Anytime</option>
      <option value="custom">Custom</option>
      <!-- <option value="stories-live">Just now (live)</option>
      <option value="today/date/stories">Today</option>
      <option value="yesterday/date/stories">Yesterday</option>
      <option value="this-week/date/stories">This week</option>
      <option value="last-week/date/stories">Last week</option>
      <option value="this-month/date/stories">This month</option>
      <option value="last-month/date/stories">Last month</option>
      <option value="this-year/date/stories">This year</option>
      <option value="last-year/date/stories">Last year</option> -->
    </select>

    <div class="custom-time disable">
      <div class="month">
        <select name="month">
          <option value="">Min Pct Off</option>
          <option value="5">5%</option>
          <option value="10">10%</option>
          <option value="20">20%</option>
          <option value="30">30%</option>
          <option value="40">40%</option>
          <option value="50">50%</option>
          <option value="60">60%</option>
          <option value="70">70%</option>
          <option value="80">80%</option>
          <option value="90">90%</option>
        </select>
      </div>

      <div class="max">
        <select name="max">
          <option value="">Max Pct Off</option>
          <option value="5">5%</option>
          <option value="10">10%</option>
          <option value="20">20%</option>
          <option value="30">30%</option>
          <option value="40">40%</option>
          <option value="50">50%</option>
          <option value="60">60%</option>
          <option value="70">70%</option>
          <option value="80">80%</option>
          <option value="90">90%</option>
        </select>
      </div>
      <!-- <input type="text" maxlength="4" class="year" placeholder="Year" name="year"> -->
    </div>
  </div>

  <div class="option_box op_wrap">
      <p>Eligible For Prime</p>
      <div class="prime-type on_off clearfix">
        <input id="off" name="prime-type" type="radio" value="" checked>
        <label class="first swich_off" for="off">OFF</label>

        <input id="prime" name="prime-type" type="radio" value="p_85%3A2470955011">
        <label for="prime" class="swich_on">ON</label>
      </div>
    </div>

  <div class="option_box op_wrap">  
    <p>Show Items With Coupons</p>
    <div class="coupon-type on_off clearfix">
      <input id="coupon_off" name="coupon-type" type="radio" value="" checked>
      <label class="first swich_off" for="coupon_off">OFF</label>

      <input id="coupon" name="coupon-type" type="radio" value="2231352011">
      <label for="coupon" class="swich_on">ON</label>
    </div>
  </div>
  
  <div class="text-center">
    <button class="search">Search</button>
  </div>
</div>


<script type="text/javascript">
  $(document).ready(function(){
  var rootURL = "https://www.amazon.com/s?k=";
  
  $("select[name='time']").change(function(){
    if ( $(this).val() === "custom" ){
      $(".custom-time").removeClass("disable");
    } else {
      $(".custom-time").addClass("disable");
    }
  });
  
  $(".search").on("click", function(){
    var postType = $("input:radio[name='post-type']:checked").val();
    var primeType = $("input:radio[name='prime-type']:checked").val();
    var couponType = $("input:radio[name='coupon-type']:checked").val();
    var keyWord = $(".keyword").val();
    var timeType = $(".time select").val();
    var postMonth = $("select[name='month']").val();
    var postMax = $("select[name='max']").val();
    // var postYear = $(".year").val();
    
    var key  = (keyWord === "") ? "" : keyWord;
    var type = (postType === "") ? "" : "&i=" + postType;
    var prime = (primeType === "") ? "" : "&rh=" + primeType;
    var coupon = (couponType === "") ? "" : "&srs=" + couponType;
    var time = (timeType === "" || timeType === "custom") ? "": timeType + "/";
    var month = (postMonth === "") ? "" : postMonth+"-";
    var max = (postMax === "") ? "" : postMax;
    // var year = (postYear === "") ? "" : postYear+"/";
    var postTime;
    
    if( timeType ==="custom" ){
      if( month !== "" && max !==""){
        postTime = "&rh=p_75%3A"+month+max;
      } else {
        postTime = "";
      }
    } else {
      
      postTime = time;
    }
    
    var query = rootURL+ key + type + prime + coupon + postTime + "&tag=oigbt-20";

    window.open(query, '_blank');
    
  });
});
</script>