<!DOCTYPE html>
<html lang="en">
  <head>
    <%= display_meta_tags %>
    <meta charset="utf-8"/>
    <meta content="IE=edge, chrome=1" http-equiv="X-UA-Compatible">
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no" />
    <meta name="google-site-verification" content="HxgA-SqPz9ZGYg0QycZcRbkmxo3MQkcVjtJaZskM-u0" />
    <meta name="naver-site-verification" content="d1e3464e5000afaeb30b5172c06c304ed28414b8"/>
    <link rel="shortcut icon" type="image/jpg" href="https://goo.gl/qBPfBM">
    <link href="http://maxcdn.bootstrapcdn.com/font-awesome/4.2.0/css/font-awesome.min.css" rel="stylesheet">  
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.12.4/jquery.min.js"></script>
    <%= csrf_meta_tags %>
    <%= stylesheet_link_tag 'application', media: 'all' %>

    <!--google alalytics-->
    <script async src="https://www.googletagmanager.com/gtag/js?id=UA-113637704-1"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());

      gtag('config', 'UA-113637704-1');
    </script>

   <!-- Global site tag (gtag.js) - Google Analytics (https)-->
    <script async src="https://www.googletagmanager.com/gtag/js?id=UA-113637704-2"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());

      gtag('config', 'UA-113637704-2');
    </script>

  </head>
  <body>

   <p class="notice"><%= notice %></p>
   <p class="alert"><%= alert %></p>

  <%= render 'shared/new_header' %>
  <%= yield %> 
  <div class="footer_wrap"><%= render 'shared/footer2' %></div>
  <!-- <div class="footer_m_wrap"><%= render 'shared/footer_m' %></div> -->
  <%= javascript_include_tag 'application' %>
   <!-- for Isotope -->
  <!-- <script src="https://unpkg.com/isotope-layout@3/dist/isotope.pkgd.js"></script> -->

  <!-- Sidebar Tab On Show Page -->
  <script>
    //<![CDATA[
  jQuery(document).ready(function($){ $(".multitab-widget-content-widget-id").hide(); $("ul.multitab-widget-content-tabs-id li:first a").addClass("multitab-widget-current").show(); $(".multitab-widget-content-widget-id:first").show(); $("ul.multitab-widget-content-tabs-id li a").click(function() { $("ul.multitab-widget-content-tabs-id li a").removeClass("multitab-widget-current a"); $(this).addClass("multitab-widget-current"); $(".multitab-widget-content-widget-id").hide(); var activeTab = $(this).attr("href"); $(activeTab).fadeIn(); return false; }); });
  //]]>
  </script>

  <!-- adsense-->
  <!-- <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
   (adsbygoogle = window.adsbygoogle || []).push({
        google_ad_client: "ca-pub-1626664143504156",
        enable_page_level_ads: true
   });
  </script> -->

  <script>
    $(document).ready(function(){
    //Begin Change header when scrolling
      //스크롤 할때 header모양 변함
      var scrolling_pc;
      scroll_check();//함수실행
      
       //스크롤 될마다 실행
      $(window).scroll(function(){
        scroll_check();//함수실행
      });//scroll
      
       //함수선언
      function scroll_check(){
        scrolling_pc = $(window).scrollTop();
        //console.log(scrolling_pc);
        if(scrolling_pc > 100){
          $(".index_header").addClass("on");
          $(".gadgets_wrapper main section#filter").addClass("on");
          $(".gadgets_wrapper main .gnb_open").addClass("on");
          $(".gadgets_wrapper main .gnb_open_b").addClass("on");
          $(".sub_nav .gnb_open").addClass("on");
          $(".sub_nav .gnb_open_b").addClass("on");
        }else{
          $(".index_header").removeClass("on");
          $(".gadgets_wrapper main section#filter").removeClass("on");
          $(".gadgets_wrapper main .gnb_open").removeClass("on");
          $(".gadgets_wrapper main .gnb_open_b").removeClass("on");
          $(".sub_nav .gnb_open").removeClass("on");
          $(".sub_nav .gnb_open_b").removeClass("on");
        }
      }
    //End
    //Begin show mobile menu
      var document_hi = $(document).height();
      //console.log(document_hi);
      $("header .gnb_m").height(document_hi);
        //메인메뉴를 열면 서브메뉴오픈 버튼이 사라짐
      $("header .gnb_open2").on("click", function(){
        $(".gadgets_wrapper main .gnb_open").hide();
        $(".sub_nav .gnb_open").hide();
        $(".featured .gnb_open").hide();      
        $("header .gnb_kbg").fadeIn(300);
        $("header .gnb_m").animate({
          left : 0
        },300);
      });
       //메인메뉴를 열면 서브메뉴오픈 버튼이 나타남
      $("header .gnb_m>.gnb_close").on("click", function(){
        $(".gadgets_wrapper main .gnb_open").show();
        $(".sub_nav .gnb_open").show();
        $(".featured .gnb_open").show();  
        $("header .gnb_kbg").fadeOut(300);
        $("header .gnb_m").animate({
          left : -800
        },300);
      });
    //End
    
    //Play Youtube
     // video overlayer: start
      $(".js-overlay-start").unbind("click").bind("click", function(e) {
        e.preventDefault();
        var src = $(this).attr("data-url");
        $(".overlay-video").show();
        setTimeout(function() {
          $(".overlay-video").addClass("o1");
          $("#player").attr("src", src);
        }, 100);
      });
       // video overlayer: close it if you click outside of the modal
      $(".overlay-video").click(function(event) {
        if (!$(event.target).closest(".videoWrapperExt").length) {
          var PlayingVideoSrc = $("#player").attr("src").replace("&autoplay=1", "");
          $("#player").attr("src", PlayingVideoSrc);
          $(".overlay-video").removeClass("o1");
          setTimeout(function() {
            $(".overlay-video").hide();
          }, 600);
        }
      });
       // video overlayer: close it via the X icon
      $(".video_close").click(function(event) {
          var PlayingVideoSrc = $("#player").attr("src").replace("&autoplay=1", "");
          $("#player").attr("src", PlayingVideoSrc);
          $(".overlay-video").removeClass("o1");
          setTimeout(function() {
            $(".overlay-video").hide();
          }, 600);
      });
    //End
    
    //Begin highlight menu
      function highlight_nav(highlight){
        $(highlight).each(function(){
         if ($(this).attr("href") == window.location.pathname){
              $(this).addClass("active");
         }
       });
      }
      //Begin Highlight All Links To Current Page for deals mobile
      $(function(){
         highlight_nav(".sub_nav .gnb_m>ul>li>a");
      });
      //End 
      //Begin Highlight All Links To Current Page for deals pc
      $(function(){
         highlight_nav(".sub_nav .sub_nav_pc>ul>li>a");
      });
      //End 
      //Begin Highlight All Links To Current Page for Main Menu
      $(function(){
         highlight_nav("header .gnb_pc>ul>li>a");
      });
      //End  
    //End
    
    //Begin show side menu on deals
      var document_deals = $(document).height();
        //console.log(document_deals);
        $(".sub_nav .gnb_m").height(document_deals);
        
        $(".sub_nav .gnb_open").on("click", function(){
          $(".sub_nav .gnb_kbg").fadeIn(300);
          $(".sub_nav .gnb_m").animate({
            right : 0
          },300);
        });
        
        $(".sub_nav .gnb_close").on("click", function(){
          $(".sub_nav .gnb_kbg").fadeOut(300);
          $(".sub_nav .gnb_m").animate({
            right : -800
          },300);
        });
        $(".sub_nav .gnb_open_b").on("click", function(){
          $(".sub_nav .gnb_kbg").fadeIn(300);
          $(".sub_nav .gnb_m").animate({
            right : 0
          },300);
        });
        
        $(".sub_nav .gnb_close").on("click", function(){
          $(".sub_nav .gnb_kbg").fadeOut(300);
          $(".sub_nav .gnb_m").animate({
            right : -1000
          },300);
        });
    //End
    
    
    //Begin Loading page
    function getRandomArbitrary(min, max) {
    return Math.random() * (max - min) + min;
    }
    // super simple router - go to page specified in hash, otherwise go to "default"
    function router(route) {
      var pageName = route ? route : $('.default.page').attr('data-page-name');
      var $page = $('[data-page-name="' + pageName + '"]');
      $('.page').css('display', 'none');
      $('[data-page]').removeClass('active');
      $('[data-page="' + pageName + '"]').addClass('active');
      $page.css('display', 'block');
    }
    router();
    
    // fake loader
    var progress = 0;
    var fakeLoaderInterval = window.setInterval(function () {
      var $lp = $('.loading-progress');
      progress = progress + getRandomArbitrary(10, 25);
      $lp.css('transform', 'translateX(' + progress + '%)');
    
      if (progress >= 75) {
        window.clearInterval(fakeLoaderInterval);
        $lp.css('transform', 'translateX(100%)');
        setTimeout(function () {return $('.loading').css('transform', 'translateY(calc(100% + 10px))');}, 400);
      }
    }, getRandomArbitrary(100, 500));
    //End 
  });

    // Begin Filter on Guides Page 
    var example = new DataFilterJS({
      filterGroup: '.filter-group',
      filterNode: '.filter-node',
      filterButtonGroup: '.filter-search',
      transitionSpeed: '0.3s'
    });

    function DataFilterJS(config){
      // define variables
      var filterGroup = config.filterGroup;
      var filterNode = config.filterNode;
      var filterButtonGroup = config.filterButtonGroup;
      var transitionSpeed = config.transitionSpeed;
      var filter_group = $(filterGroup);
      var filter_node = $(filterGroup+' > '+filterNode);
      var search_val = $(filterButtonGroup+'> '+'input[type="text"]').value;
      $(filterGroup+', '+filterNode+', '+filterNode+'.filter-me').css({"transition":"all "+transitionSpeed});
      
      // (Button) Data Filter Function
      $(filterButtonGroup+' .filter-button').on('click', function(e) {
        var eventFilter = e.currentTarget.attributes[1].nodeValue;
         // Loop through Filter Nodes on Button Click
         $.each(filter_node, function(i, v) {
            if(eventFilter == "*") {
              filter_node[i].classList.remove('filter-me');
            } else if(filter_node[i].getAttribute('data-filter').includes(eventFilter) == false) {
              filter_node[i].classList.add('filter-me')
            } else {filter_node[i].classList.remove('filter-me');}
         });
      }); // end click event

      // (Keystroke) Data Filter Function    
      $(filterButtonGroup+' > input[type="text"]').on('keypress keydown keyup', function(e, fnd) {
        // Loop through Filter Nodes on Keystroke
        $.each($(filterNode), function(i, v) {
          var node = v.getAttribute("data-filter").toString().toUpperCase();
          var search_string = $(filterButtonGroup+' > '+'input[type="text"]').val().toUpperCase();
          //console.log(node.getAttribute('data-filter'));
          if(node.includes(search_string) == false) {
            v.classList.add('filter-me');
          } else {v.classList.remove('filter-me');}
        }); // end each
      }); // end keypress
    }
    // End Filter on Guides Page 

    //Begin show mobile menu on Guide page
      var document_h = $(document).height();
    //console.log(document_h);
    $(".featured .sm_mobile").height(document_h);
    
    $(".featured .gnb_open").on("click", function(){
      $(".featured .gnb_kbg").fadeIn(300);
      $(".featured .sm_mobile").animate({
        right : 0
      },300);

    });
    $(".featured .gnb_kbg").on("click", function(){
      $(".featured .gnb_kbg").fadeOut(300);
      $(".featured .sm_mobile").animate({
        right : -800
      },300);
    });
    $(".featured .gnb_close").on("click", function(){
      $(".featured .gnb_kbg").fadeOut(300);
      $(".featured .sm_mobile").animate({
        right : -800
      },300);
    });
    //End show mobile menu on Guide page

    

  </script>

  <!-- Content Insights of Amazon-->
  <!-- <div id="amzn-assoc-ad-9964b306-5e55-4810-adb9-cb2e4b817f96"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&adInstanceId=9964b306-5e55-4810-adb9-cb2e4b817f96"></script> -->

  </body>
</html>

